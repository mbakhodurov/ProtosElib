syntax = "proto3";
package library;

option go_package = "mbakhodurov.library.v1;librarypb";

service LibraryService {
    rpc GetBook(GetBookRequest) returns (GetBookResponse);
    rpc AddBook(AddBookRequest) returns (AddBookResponse);

    rpc ListBooks(ListBooksRequest) returns (ListBooksResponse);

    rpc BorrowBook(BorrowBookRequest) returns (BorrowBookResponse);
    rpc ReturnBook(ReturnBookRequest) returns (ReturnBookResponse);
}

message GetBookRequest { 
    string book_id = 1; 
}
message GetBookResponse { 
    string book_id = 1; 
    string title = 2; 
    string author = 3; 
    bool available = 4;
    string created_at = 5; 
}

message AddBookRequest{
    string title = 1; 
    string author = 2; 
    bool available = 3;
    string created_at = 4;
}
message AddBookResponse { 
    int64 book_id = 1; 
}

message ListBooksRequest {}
message ListBooksResponse { repeated GetBookResponse items = 1; }

message BorrowBookRequest { string user_id = 1; string book_id = 2; }
message BorrowBookResponse { string borrow_id = 1; string status = 2; }

message ReturnBookRequest { string borrow_id = 1; }
message ReturnBookResponse { bool ok = 1; }