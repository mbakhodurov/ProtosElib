syntax = "proto3";
package library;

option go_package = "mbakhodurov.library.v1;librarypb";

service LibraryService {
    rpc AddBook(AddBookRequest) returns (AddBookResponse);
    rpc GetBook(GetBookRequest) returns (GetBookResponse);
    rpc ListBooks(ListBooksRequest) returns (ListBooksResponse);

    rpc BorrowBook(BorrowBookRequest) returns (BorrowBookResponse);
    rpc ReturnBook(ReturnBookRequest) returns (ReturnBookResponse);
}

message AddBookRequest{
    string title = 1; 
    string author = 2; 
    uint32 stock = 3;
}
message AddBookResponse { 
    string book_id = 1; 
}

message GetBookRequest { 
    string book_id = 1; 
}
message GetBookResponse { 
    string book_id = 1; 
    string title = 2; 
    string author = 3; 
    uint32 available = 4; 
}

message ListBooksRequest { uint32 limit = 1; uint32 offset = 2; string query = 3; }
message ListBooksResponse { repeated GetBookResponse items = 1; }

message BorrowBookRequest { string user_id = 1; string book_id = 2; }
message BorrowBookResponse { string borrow_id = 1; string status = 2; }

message ReturnBookRequest { string borrow_id = 1; }
message ReturnBookResponse { bool ok = 1; }